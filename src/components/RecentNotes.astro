---
import { getCollection } from 'astro:content';
import { LinkCard, CardGrid } from '@astrojs/starlight/components';

const allDocs = await getCollection('docs');

// Filter out index pages if any, and pick 4 recent ones
const recentDocs = allDocs
  .filter(doc => {
    const slug = doc.slug || doc.id;
    return slug && !slug.endsWith('index') && !slug.includes('_category_');
  })
  .slice(0, 4);
---

<CardGrid stagger>
  {recentDocs.map(doc => (
    <LinkCard
      title={doc.data.title}
      description={doc.data.description || 'Click to read more...'}
      href={`/${doc.slug || doc.id}/`}
    />
  ))}
</CardGrid>
